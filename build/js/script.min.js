!function(){document.querySelector(".service-form form");var e=document.querySelector(".service-form__input--name"),t=document.querySelector(".service-form__label--name"),i=document.querySelector(".service-form__input--surname"),c=document.querySelector(".service-form__label--surname"),s=document.querySelector(".service-form__input--phone"),n=document.querySelector(".service-form__label--phone"),r=document.querySelector(".service-form__input--email"),l=document.querySelector(".service-form__label--email"),o=document.querySelector(".service-form__input--city"),a=(document.querySelector(".service-form__label--city"),document.querySelector(".service-form__text")),u=document.querySelector(".service-form__label--text"),m=document.querySelector("input[type='checkbox']"),d=document.querySelector("label[for='agreement']"),p=document.querySelector(".service-form__text-wrapper"),f=document.querySelector(".service-form__submit");new Inputmask("+7(999)999-99-99").mask(s);var b=!1,h=!1,v=!1,y=!1,_=!1,x=!1,g=function(e){e.classList.contains("js--error")||e.classList.add("js--error")},w=function(e){e.classList.contains("js--error")&&e.classList.remove("js--error")},j=function(){b&&h&&v&&y&&_&&x&&""!==o.value?f.hasAttribute("disabled")&&f.removeAttribute("disabled"):f.hasAttribute("disabled")||f.setAttribute("disabled","")};window.checkFormValidity=j,e.addEventListener("input",(function(){(b=""!==e.value)?w(e):g(e),b?w(t):g(t),j()})),i.addEventListener("input",(function(){(h=""!==i.value)?w(i):g(i),h?w(c):g(c),j()})),s.addEventListener("input",(function(){(v=!/_/.test(s.value))?w(s):g(s),v?w(n):g(n),j()})),r.addEventListener("input",(function(){(y=!!r.validity.valid)?w(r):g(r),y?w(l):g(l),j()})),a.addEventListener("input",(function(){(_=""!==a.value)?w(a):g(a),_?w(u):g(u),j()})),m.addEventListener("change",(function(){(x=!!m.checked)?w(d):g(d),x?w(p):g(p),j()}))}(),function(e,t){e(document).ready((function(){var i=0,c=function(){return window.matchMedia("(min-width: 1400px)").matches},s=function(){return window.matchMedia("(min-width: 768px)").matches&&window.matchMedia("(max-width: 1023px)").matches},n=function(){return window.matchMedia("(min-width: 320px)").matches&&window.matchMedia("(max-width: 479px)").matches},r=!c(),l=!s(),o=!n();e(".js-example-basic-single").select2({placeholder:"Выберите город"}),e(".js-example-basic-single").val(null).trigger("change"),e(".js-example-basic-single").on("select2:open",(function(t){e(".select2-results").mCustomScrollbar({setHeight:150,autoHideScrollbar:!0,theme:"minimal-dark"}),i<1&&(e(".js-example-basic-single").val("610").trigger("change"),i++),setTimeout((function(){e(".select2-search__field").focus()}),400)})),e(".js-example-basic-single").on("select2:select",(function(e){t()})),e(window).on("resize",(function(){c()||r||(r=!0,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),c()&&r&&(r=!1,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),s()||l||(l=!0,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),s()&&l&&(l=!1,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),n()||o||(o=!0,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),n()&&o&&(o=!1,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300))}))}))}(jQuery,window.checkFormValidity);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0uanMiLCJzZWxlY3QtaW5wdXQuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmFtZUlucHV0IiwibmFtZUxhYmVsIiwic3VybmFtZUlucHV0Iiwic3VybmFtZUxhYmVsIiwicGhvbmVJbnB1dCIsInBob25lTGFiZWwiLCJlbWFpbElucHV0IiwiZW1haWxMYWJlbCIsImNpdHlJbnB1dCIsInRleHRJbnB1dCIsInRleHRMYWJlbCIsImNoZWNrYm94SW5wdXQiLCJjaGVja2JveExhYmVsIiwiYWdyZWVtZW50Iiwic3VibWl0QnV0dG9uIiwiSW5wdXRtYXNrIiwibWFzayIsImlzTmFtZVZhbGlkIiwiaXNTdXJuYW1lVmFsaWQiLCJpc1Bob25lVmFsaWQiLCJpc0VtYWlsVmFsaWQiLCJpc1RleHRWYWxpZCIsImlzQWdyZWUiLCJyZW5kZXJFcnJvciIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwicmVtb3ZlRXJyb3IiLCJyZW1vdmUiLCJjaGVja0Zvcm1WYWxpZGl0eSIsInZhbHVlIiwiaGFzQXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRlc3QiLCJ2YWxpZGl0eSIsInZhbGlkIiwiY2hlY2tlZCIsIiQiLCJyZWFkeSIsInNlbGVjdGlvbnMiLCJpc0Rlc2t0b3AiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImlzVGFibGV0IiwiaXNNb2JpbGUiLCJpc091dE9mRGVza3RvcCIsImlzT3V0T2ZUYWJsZXQiLCJpc091dE9mTW9iaWxlIiwic2VsZWN0MiIsInBsYWNlaG9sZGVyIiwidmFsIiwidHJpZ2dlciIsIm9uIiwiZSIsIm1DdXN0b21TY3JvbGxiYXIiLCJzZXRIZWlnaHQiLCJhdXRvSGlkZVNjcm9sbGJhciIsInRoZW1lIiwic2V0VGltZW91dCIsImZvY3VzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNB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QUE3QixPQUFBTCIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtIGZvcm0nKTtcbiAgdmFyIG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX2lucHV0LS1uYW1lJyk7XG4gIHZhciBuYW1lTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19sYWJlbC0tbmFtZScpO1xuICB2YXIgc3VybmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9faW5wdXQtLXN1cm5hbWUnKTtcbiAgdmFyIHN1cm5hbWVMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX2xhYmVsLS1zdXJuYW1lJyk7XG4gIHZhciBwaG9uZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9faW5wdXQtLXBob25lJyk7XG4gIHZhciBwaG9uZUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fbGFiZWwtLXBob25lJyk7XG4gIHZhciBlbWFpbElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9faW5wdXQtLWVtYWlsJyk7XG4gIHZhciBlbWFpbExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fbGFiZWwtLWVtYWlsJyk7XG4gIHZhciBjaXR5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19pbnB1dC0tY2l0eScpO1xuICB2YXIgY2l0eUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fbGFiZWwtLWNpdHknKTtcbiAgdmFyIHRleHRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX3RleHQnKTtcbiAgdmFyIHRleHRMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX2xhYmVsLS10ZXh0Jyk7XG4gIHZhciBjaGVja2JveElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0W3R5cGU9J2NoZWNrYm94J11cIik7XG4gIHZhciBjaGVja2JveExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImxhYmVsW2Zvcj0nYWdyZWVtZW50J11cIik7XG4gIHZhciBhZ3JlZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX190ZXh0LXdyYXBwZXInKTtcbiAgdmFyIHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX3N1Ym1pdCcpO1xuXG4gIHZhciBpbVBob25lID0gbmV3IElucHV0bWFzaygnKzcoOTk5KTk5OS05OS05OScpO1xuICBpbVBob25lLm1hc2socGhvbmVJbnB1dCk7XG5cbiAgdmFyIGlzTmFtZVZhbGlkID0gZmFsc2U7XG4gIHZhciBpc1N1cm5hbWVWYWxpZCA9IGZhbHNlO1xuICB2YXIgaXNQaG9uZVZhbGlkID0gZmFsc2U7XG4gIHZhciBpc0VtYWlsVmFsaWQgPSBmYWxzZTtcbiAgdmFyIGlzVGV4dFZhbGlkID0gZmFsc2U7XG4gIHZhciBpc0FncmVlID0gZmFsc2U7XG5cbiAgdmFyIGRpc2FibGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFzdWJtaXRCdXR0b24uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICBzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGVuYWJsZUJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3VibWl0QnV0dG9uLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJlbmRlckVycm9yID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanMtLWVycm9yJykpIHtcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdqcy0tZXJyb3InKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJlbW92ZUVycm9yID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy0tZXJyb3InKSkge1xuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1lcnJvcicpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgY2hlY2tGb3JtVmFsaWRpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKFxuICAgICAgaXNOYW1lVmFsaWRcbiAgICAgICYmIGlzU3VybmFtZVZhbGlkXG4gICAgICAmJiBpc1Bob25lVmFsaWRcbiAgICAgICYmIGlzRW1haWxWYWxpZFxuICAgICAgJiYgaXNUZXh0VmFsaWRcbiAgICAgICYmIGlzQWdyZWVcbiAgICAgICYmIGNpdHlJbnB1dC52YWx1ZSAhPT0gJydcbiAgICApIHtcbiAgICAgIGVuYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXNhYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBvbk5hbWVJbnB1dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpc05hbWVWYWxpZCA9IG5hbWVJbnB1dC52YWx1ZSA9PT0gJycgPyBmYWxzZSA6IHRydWU7XG5cbiAgICBpc05hbWVWYWxpZCA/IHJlbW92ZUVycm9yKG5hbWVJbnB1dCkgOiByZW5kZXJFcnJvcihuYW1lSW5wdXQpO1xuICAgIGlzTmFtZVZhbGlkID8gcmVtb3ZlRXJyb3IobmFtZUxhYmVsKSA6IHJlbmRlckVycm9yKG5hbWVMYWJlbCk7XG5cbiAgICBjaGVja0Zvcm1WYWxpZGl0eSgpO1xuICB9O1xuXG4gIHZhciBvblN1cm5hbWVJbnB1dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpc1N1cm5hbWVWYWxpZCA9IHN1cm5hbWVJbnB1dC52YWx1ZSA9PT0gJycgPyBmYWxzZSA6IHRydWU7XG5cbiAgICBpc1N1cm5hbWVWYWxpZCA/IHJlbW92ZUVycm9yKHN1cm5hbWVJbnB1dCkgOiByZW5kZXJFcnJvcihzdXJuYW1lSW5wdXQpO1xuICAgIGlzU3VybmFtZVZhbGlkID8gcmVtb3ZlRXJyb3Ioc3VybmFtZUxhYmVsKSA6IHJlbmRlckVycm9yKHN1cm5hbWVMYWJlbCk7XG5cbiAgICBjaGVja0Zvcm1WYWxpZGl0eSgpO1xuICB9O1xuXG4gIHZhciBvblBob25lSW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaXNQaG9uZVZhbGlkID0gKC9fLykudGVzdChwaG9uZUlucHV0LnZhbHVlKSA/IGZhbHNlIDogdHJ1ZTtcblxuICAgIGlzUGhvbmVWYWxpZCA/IHJlbW92ZUVycm9yKHBob25lSW5wdXQpIDogcmVuZGVyRXJyb3IocGhvbmVJbnB1dCk7XG4gICAgaXNQaG9uZVZhbGlkID8gcmVtb3ZlRXJyb3IocGhvbmVMYWJlbCkgOiByZW5kZXJFcnJvcihwaG9uZUxhYmVsKTtcblxuXG4gICAgY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgfTtcblxuICB2YXIgb25FbWFpbElucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlzRW1haWxWYWxpZCA9IGVtYWlsSW5wdXQudmFsaWRpdHkudmFsaWQgPyB0cnVlIDogZmFsc2U7XG5cbiAgICBpc0VtYWlsVmFsaWQgPyByZW1vdmVFcnJvcihlbWFpbElucHV0KSA6IHJlbmRlckVycm9yKGVtYWlsSW5wdXQpO1xuICAgIGlzRW1haWxWYWxpZCA/IHJlbW92ZUVycm9yKGVtYWlsTGFiZWwpIDogcmVuZGVyRXJyb3IoZW1haWxMYWJlbCk7XG5cblxuICAgIGNoZWNrRm9ybVZhbGlkaXR5KCk7XG4gIH07XG5cbiAgdmFyIG9uVGV4dElucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlzVGV4dFZhbGlkID0gdGV4dElucHV0LnZhbHVlID09PSAnJyA/IGZhbHNlIDogdHJ1ZTtcblxuICAgIGlzVGV4dFZhbGlkID8gcmVtb3ZlRXJyb3IodGV4dElucHV0KSA6IHJlbmRlckVycm9yKHRleHRJbnB1dCk7XG4gICAgaXNUZXh0VmFsaWQgPyByZW1vdmVFcnJvcih0ZXh0TGFiZWwpIDogcmVuZGVyRXJyb3IodGV4dExhYmVsKTtcblxuICAgIGNoZWNrRm9ybVZhbGlkaXR5KCk7XG4gIH07XG5cbiAgdmFyIG9uQWdyZWVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaXNBZ3JlZSA9IGNoZWNrYm94SW5wdXQuY2hlY2tlZCA/IHRydWUgOiBmYWxzZTtcblxuXG5cbiAgICBpc0FncmVlID8gcmVtb3ZlRXJyb3IoY2hlY2tib3hMYWJlbCkgOiByZW5kZXJFcnJvcihjaGVja2JveExhYmVsKTtcbiAgICBpc0FncmVlID8gcmVtb3ZlRXJyb3IoYWdyZWVtZW50KSA6IHJlbmRlckVycm9yKGFncmVlbWVudCk7XG5cblxuICAgIGNoZWNrRm9ybVZhbGlkaXR5KCk7XG4gIH07XG5cbiAgd2luZG93LmNoZWNrRm9ybVZhbGlkaXR5ID0gY2hlY2tGb3JtVmFsaWRpdHk7XG5cbiAgbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25OYW1lSW5wdXQpO1xuICBzdXJuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvblN1cm5hbWVJbnB1dCk7XG4gIHBob25lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvblBob25lSW5wdXQpO1xuICBlbWFpbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25FbWFpbElucHV0KTtcbiAgdGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25UZXh0SW5wdXQpO1xuICBjaGVja2JveElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQWdyZWVDaGFuZ2UpO1xufSkoKTtcbiIsIihmdW5jdGlvbiggJCwgY2hlY2tGb3JtVmFsaWRpdHkgKSB7XG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxlY3Rpb25zID0gMDtcbiAgICB2YXIgaXNEZXNrdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiAxNDAwcHgpJykubWF0Y2hlcztcbiAgICB9IDtcblxuICAgIHZhciBpc1RhYmxldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAgd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDc2OHB4KScpLm1hdGNoZXNcbiAgICAgICAgJiYgd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDEwMjNweCknKS5tYXRjaGVzO1xuICAgIH07XG5cbiAgICB2YXIgaXNNb2JpbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gIHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiAzMjBweCknKS5tYXRjaGVzXG4gICAgICAgICYmIHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA0NzlweCknKS5tYXRjaGVzO1xuICAgIH07XG5cblxuICAgIHZhciBpc091dE9mRGVza3RvcCA9ICFpc0Rlc2t0b3AoKTtcbiAgICB2YXIgaXNPdXRPZlRhYmxldCA9ICFpc1RhYmxldCgpO1xuICAgIHZhciBpc091dE9mTW9iaWxlID0gIWlzTW9iaWxlKCk7XG5cbiAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LPQvtGA0L7QtFwiXG4gICAgfSk7XG5cbiAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS52YWwobnVsbCkudHJpZ2dlcignY2hhbmdlJyk7XG5cbiAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5vbignc2VsZWN0MjpvcGVuJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICQoXCIuc2VsZWN0Mi1yZXN1bHRzXCIpLm1DdXN0b21TY3JvbGxiYXIoe1xuICAgICAgICBzZXRIZWlnaHQ6IDE1MCxcbiAgICAgICAgYXV0b0hpZGVTY3JvbGxiYXI6IHRydWUsXG4gICAgICAgIHRoZW1lOiAnbWluaW1hbC1kYXJrJ1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChzZWxlY3Rpb25zIDwgMSkge1xuICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS52YWwoJzYxMCcpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICBzZWxlY3Rpb25zKys7XG4gICAgICB9XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcuc2VsZWN0Mi1zZWFyY2hfX2ZpZWxkJykuZm9jdXMoKTtcbiAgICAgIH0sIDQwMCk7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5vbignc2VsZWN0MjpzZWxlY3QnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgICB9KTtcblxuICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFpc0Rlc2t0b3AoKSAmJiAhaXNPdXRPZkRlc2t0b3ApIHtcbiAgICAgICAgaXNPdXRPZkRlc2t0b3AgPSB0cnVlO1xuXG4gICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoJ2Rlc3Ryb3knKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LPQvtGA0L7QtFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0Rlc2t0b3AoKSAmJiBpc091dE9mRGVza3RvcCkge1xuICAgICAgICBpc091dE9mRGVza3RvcCA9IGZhbHNlO1xuXG4gICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoJ2Rlc3Ryb3knKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LPQvtGA0L7QtFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNUYWJsZXQoKSAmJiAhaXNPdXRPZlRhYmxldCkge1xuICAgICAgICBpc091dE9mVGFibGV0ID0gdHJ1ZTtcblxuICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKCdkZXN0cm95Jyk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0Mih7XG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCz0L7RgNC+0LRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNUYWJsZXQoKSAmJiBpc091dE9mVGFibGV0KSB7XG4gICAgICAgIGlzT3V0T2ZUYWJsZXQgPSBmYWxzZTtcbiAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0MignZGVzdHJveScpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc01vYmlsZSgpICYmICFpc091dE9mTW9iaWxlKSB7XG4gICAgICAgIGlzT3V0T2ZNb2JpbGUgPSB0cnVlO1xuXG4gICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoJ2Rlc3Ryb3knKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LPQvtGA0L7QtFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc01vYmlsZSgpICYmIGlzT3V0T2ZNb2JpbGUpIHtcbiAgICAgICAgaXNPdXRPZk1vYmlsZSA9IGZhbHNlO1xuXG4gICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoJ2Rlc3Ryb3knKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LPQvtGA0L7QtFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG4gICAgfSlcbiAgfSk7XG59KSggalF1ZXJ5LCB3aW5kb3cuY2hlY2tGb3JtVmFsaWRpdHkgKTtcbiJdfQ==
