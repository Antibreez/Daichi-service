!function(){if(document.querySelector(".equipment__slider-container")){var e=function(){return window.matchMedia("(min-width: 768px)").matches},t=!e(),i=e()?n():c();if(i){window.addEventListener("resize",(function(){t&&e()&&(i.destroy(!0,!0),i=n(),t=!1),t||e()||(i.destroy(!0,!0),i=c(),t=!0)}))}}function n(){return new Swiper(".equipment__slider-container",{freeMode:!0,slidesPerView:2.3})}function c(){return new Swiper(".equipment__slider-container",{pagination:{el:".swiper-pagination",type:"bullets"}})}}(),function(){var e=document.querySelector(".service-form form"),t=document.querySelector(".service-form__input--name"),i=document.querySelector(".service-form__label--name"),n=document.querySelector(".service-form__input--surname"),c=document.querySelector(".service-form__label--surname"),s=document.querySelector(".service-form__input--phone"),r=document.querySelector(".service-form__label--phone"),o=document.querySelector(".service-form__input--email"),l=document.querySelector(".service-form__label--email"),a=document.querySelector(".service-form__input--city"),u=(document.querySelector(".service-form__label--city"),document.querySelector(".service-form__text")),m=document.querySelector(".service-form__label--text"),d=document.querySelector("input[type='checkbox']"),p=document.querySelector("label[for='agreement']"),f=document.querySelector(".service-form__text-wrapper"),h=document.querySelector(".service-form__submit");if(e){new Inputmask("+7(999)999-99-99").mask(s);var b=!1,v=!1,_=!1,y=!1,w=!1,x=!1,g=function(e){e.classList.contains("js--error")||e.classList.add("js--error")},j=function(e){e.classList.contains("js--error")&&e.classList.remove("js--error")},S=function(){b&&v&&_&&y&&w&&x&&""!==a.value?h.hasAttribute("disabled")&&h.removeAttribute("disabled"):h.hasAttribute("disabled")||h.setAttribute("disabled","")};window.checkFormValidity=S,t.addEventListener("input",(function(){(b=""!==t.value)?j(t):g(t),b?j(i):g(i),S()})),n.addEventListener("input",(function(){(v=""!==n.value)?j(n):g(n),v?j(c):g(c),S()})),s.addEventListener("input",(function(){(_=!/_/.test(s.value))?j(s):g(s),_?j(r):g(r),S()})),o.addEventListener("input",(function(){(y=!!o.validity.valid)?j(o):g(o),y?j(l):g(l),S()})),u.addEventListener("input",(function(){(w=""!==u.value)?j(u):g(u),w?j(m):g(m),S()})),d.addEventListener("change",(function(){(x=!!d.checked)?j(p):g(p),x?j(f):g(f),S()}))}}(),function(e,t){e(document).ready((function(){var i=0,n=function(){return window.matchMedia("(min-width: 1400px)").matches},c=function(){return window.matchMedia("(min-width: 768px)").matches&&window.matchMedia("(max-width: 1023px)").matches},s=function(){return window.matchMedia("(min-width: 320px)").matches&&window.matchMedia("(max-width: 479px)").matches},r=!n(),o=!c(),l=!s();e(".js-example-basic-single").select2({placeholder:"Выберите город"}),e(".js-example-basic-single").val(null).trigger("change"),e(".js-example-basic-single").on("select2:open",(function(t){e(".select2-results").mCustomScrollbar({setHeight:150,autoHideScrollbar:!0,theme:"minimal-dark"}),i<1&&(e(".js-example-basic-single").val("610").trigger("change"),i++),setTimeout((function(){e(".select2-search__field").focus()}),400)})),e(".js-example-basic-single").on("select2:select",(function(e){t()})),e(window).on("resize",(function(){n()||r||(r=!0,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),n()&&r&&(r=!1,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),c()||o||(o=!0,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),c()&&o&&(o=!1,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),s()||l||(l=!0,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),s()&&l&&(l=!1,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300))}))}))}(jQuery,window.checkFormValidity);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVxdWlwbWVudC5qcyIsImZvcm0uanMiLCJzZWxlY3QtaW5wdXQuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaXNUYWJsZXQiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImlzT3V0T2ZUYWJsZXQiLCJzbGlkZXIiLCJpbml0RnJlZVN3aXBlciIsImluaXRTaW5nbGVTd2lwZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVzdHJveSIsIlN3aXBlciIsImZyZWVNb2RlIiwic2xpZGVzUGVyVmlldyIsInBhZ2luYXRpb24iLCJlbCIsInR5cGUiLCJmb3JtIiwibmFtZUlucHV0IiwibmFtZUxhYmVsIiwic3VybmFtZUlucHV0Iiwic3VybmFtZUxhYmVsIiwicGhvbmVJbnB1dCIsInBob25lTGFiZWwiLCJlbWFpbElucHV0IiwiZW1haWxMYWJlbCIsImNpdHlJbnB1dCIsInRleHRJbnB1dCIsInRleHRMYWJlbCIsImNoZWNrYm94SW5wdXQiLCJjaGVja2JveExhYmVsIiwiYWdyZWVtZW50Iiwic3VibWl0QnV0dG9uIiwiSW5wdXRtYXNrIiwibWFzayIsImlzTmFtZVZhbGlkIiwiaXNTdXJuYW1lVmFsaWQiLCJpc1Bob25lVmFsaWQiLCJpc0VtYWlsVmFsaWQiLCJpc1RleHRWYWxpZCIsImlzQWdyZWUiLCJyZW5kZXJFcnJvciIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwicmVtb3ZlRXJyb3IiLCJyZW1vdmUiLCJjaGVja0Zvcm1WYWxpZGl0eSIsInZhbHVlIiwiaGFzQXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwidGVzdCIsInZhbGlkaXR5IiwidmFsaWQiLCJjaGVja2VkIiwiJCIsInJlYWR5Iiwic2VsZWN0aW9ucyIsImlzRGVza3RvcCIsImlzTW9iaWxlIiwiaXNPdXRPZkRlc2t0b3AiLCJpc091dE9mTW9iaWxlIiwic2VsZWN0MiIsInBsYWNlaG9sZGVyIiwidmFsIiwidHJpZ2dlciIsIm9uIiwiZSIsIm1DdXN0b21TY3JvbGxiYXIiLCJzZXRIZWlnaHQiLCJhdXRvSGlkZVNjcm9sbGJhciIsInRoZW1lIiwic2V0VGltZW91dCIsImZvY3VzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLEdBQUFBLFNBQUFDLGNBQUEsZ0NBQUEsQ0FvQkEsSUFBQUMsRUFBQSxXQUNBLE9BQUFDLE9BQUFDLFdBQUEsc0JBQUFDLFNBR0FDLEdBQUFKLElBRUFLLEVBQUFMLElBQ0FNLElBQ0FDLElBRUEsR0FBQUYsRUFBQSxDQWtCQUosT0FBQU8saUJBQUEsVUFkQSxXQUNBSixHQUFBSixNQUNBSyxFQUFBSSxTQUFBLEdBQUEsR0FDQUosRUFBQUMsSUFDQUYsR0FBQSxHQUdBQSxHQUFBSixNQUNBSyxFQUFBSSxTQUFBLEdBQUEsR0FDQUosRUFBQUUsSUFDQUgsR0FBQSxPQXhDQSxTQUFBRSxJQUNBLE9BQUEsSUFBQUksT0FBQSwrQkFBQSxDQUNBQyxVQUFBLEVBQ0FDLGNBQUEsTUFJQSxTQUFBTCxJQUNBLE9BQUEsSUFBQUcsT0FBQSwrQkFBQSxDQUNBRyxXQUFBLENBQ0FDLEdBQUEscUJBQ0FDLEtBQUEsY0FoQkEsR0NBQSxXQUNBLElBQUFDLEVBQUFsQixTQUFBQyxjQUFBLHNCQUNBa0IsRUFBQW5CLFNBQUFDLGNBQUEsOEJBQ0FtQixFQUFBcEIsU0FBQUMsY0FBQSw4QkFDQW9CLEVBQUFyQixTQUFBQyxjQUFBLGlDQUNBcUIsRUFBQXRCLFNBQUFDLGNBQUEsaUNBQ0FzQixFQUFBdkIsU0FBQUMsY0FBQSwrQkFDQXVCLEVBQUF4QixTQUFBQyxjQUFBLCtCQUNBd0IsRUFBQXpCLFNBQUFDLGNBQUEsK0JBQ0F5QixFQUFBMUIsU0FBQUMsY0FBQSwrQkFDQTBCLEVBQUEzQixTQUFBQyxjQUFBLDhCQUVBMkIsR0FEQTVCLFNBQUFDLGNBQUEsOEJBQ0FELFNBQUFDLGNBQUEsd0JBQ0E0QixFQUFBN0IsU0FBQUMsY0FBQSw4QkFDQTZCLEVBQUE5QixTQUFBQyxjQUFB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QUNBUixLQUFBRSxJQUNBQSxHQUFBLEVBRUFMLEVBQUEsNEJBQUFPLFFBQUEsV0FFQVUsWUFBQSxXQUNBakIsRUFBQSw0QkFBQU8sUUFBQSxDQUNBQyxZQUFBLHFCQUVBLE1BR0FMLEtBQUFFLElBQ0FBLEdBQUEsRUFFQUwsRUFBQSw0QkFBQU8sUUFBQSxXQUVBVSxZQUFBLFdBQ0FqQixFQUFBLDRCQUFBTyxRQUFBLENBQ0FDLFlBQUEscUJBRUEsTUFHQWhFLEtBQUFJLElBQ0FBLEdBQUEsRUFFQW9ELEVBQUEsNEJBQUFPLFFBQUEsV0FFQVUsWUFBQSxXQUNBakIsRUFBQSw0QkFBQU8sUUFBQSxDQUNBQyxZQUFBLHFCQUVBLE1BR0FoRSxLQUFBSSxJQUNBQSxHQUFBLEVBQ0FvRCxFQUFBLDRCQUFBTyxRQUFBLFdBRUFVLFlBQUEsV0FDQWpCLEVBQUEsNEJBQUFPLFFBQUEsQ0FDQUMsWUFBQSxxQkFFQSxNQUdBSixLQUFBRSxJQUNBQSxHQUFBLEVBRUFOLEVBQUEsNEJBQUFPLFFBQUEsV0FFQVUsWUFBQSxXQUNBakIsRUFBQSw0QkFBQU8sUUFBQSxDQUNBQyxZQUFBLHFCQUVBLE1BR0FKLEtBQUFFLElBQ0FBLEdBQUEsRUFFQU4sRUFBQSw0QkFBQU8sUUFBQSxXQUVBVSxZQUFBLFdBQ0FqQixFQUFBLDRCQUFBTyxRQUFBLENBQ0FDLFlBQUEscUJBRUEsWUF0SEEsQ0EwSEFXLE9BQUExRSxPQUFBOEMiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVxdWlwbWVudF9fc2xpZGVyLWNvbnRhaW5lcicpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdEZyZWVTd2lwZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBTd2lwZXIoJy5lcXVpcG1lbnRfX3NsaWRlci1jb250YWluZXInLCB7XG4gICAgICBmcmVlTW9kZTogdHJ1ZSxcbiAgICAgIHNsaWRlc1BlclZpZXc6IDIuM1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdFNpbmdsZVN3aXBlcigpIHtcbiAgICByZXR1cm4gbmV3IFN3aXBlcignLmVxdWlwbWVudF9fc2xpZGVyLWNvbnRhaW5lcicsIHtcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgICB0eXBlOiAnYnVsbGV0cycsXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB2YXIgaXNUYWJsZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogNzY4cHgpXCIpLm1hdGNoZXM7XG4gIH07XG5cbiAgdmFyIGlzT3V0T2ZUYWJsZXQgPSAhaXNUYWJsZXQoKTtcblxuICB2YXIgc2xpZGVyID0gaXNUYWJsZXQoKVxuICAgID8gaW5pdEZyZWVTd2lwZXIoKVxuICAgIDogaW5pdFNpbmdsZVN3aXBlcigpO1xuXG4gIGlmICghc2xpZGVyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChpc091dE9mVGFibGV0ICYmIGlzVGFibGV0KCkpIHtcbiAgICAgIHNsaWRlci5kZXN0cm95KHRydWUsIHRydWUpO1xuICAgICAgc2xpZGVyID0gaW5pdEZyZWVTd2lwZXIoKTtcbiAgICAgIGlzT3V0T2ZUYWJsZXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIWlzT3V0T2ZUYWJsZXQgJiYgIWlzVGFibGV0KCkpIHtcbiAgICAgIHNsaWRlci5kZXN0cm95KHRydWUsIHRydWUpO1xuICAgICAgc2xpZGVyID0gaW5pdFNpbmdsZVN3aXBlcigpO1xuICAgICAgaXNPdXRPZlRhYmxldCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm0gZm9ybScpO1xuICB2YXIgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9faW5wdXQtLW5hbWUnKTtcbiAgdmFyIG5hbWVMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX2xhYmVsLS1uYW1lJyk7XG4gIHZhciBzdXJuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19pbnB1dC0tc3VybmFtZScpO1xuICB2YXIgc3VybmFtZUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fbGFiZWwtLXN1cm5hbWUnKTtcbiAgdmFyIHBob25lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19pbnB1dC0tcGhvbmUnKTtcbiAgdmFyIHBob25lTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19sYWJlbC0tcGhvbmUnKTtcbiAgdmFyIGVtYWlsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19pbnB1dC0tZW1haWwnKTtcbiAgdmFyIGVtYWlsTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19sYWJlbC0tZW1haWwnKTtcbiAgdmFyIGNpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX2lucHV0LS1jaXR5Jyk7XG4gIHZhciBjaXR5TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19sYWJlbC0tY2l0eScpO1xuICB2YXIgdGV4dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fdGV4dCcpO1xuICB2YXIgdGV4dExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fbGFiZWwtLXRleHQnKTtcbiAgdmFyIGNoZWNrYm94SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0nY2hlY2tib3gnXVwiKTtcbiAgdmFyIGNoZWNrYm94TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxbZm9yPSdhZ3JlZW1lbnQnXVwiKTtcbiAgdmFyIGFncmVlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX3RleHQtd3JhcHBlcicpO1xuICB2YXIgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fc3VibWl0Jyk7XG5cbiAgaWYgKCFmb3JtKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGltUGhvbmUgPSBuZXcgSW5wdXRtYXNrKCcrNyg5OTkpOTk5LTk5LTk5Jyk7XG4gIGltUGhvbmUubWFzayhwaG9uZUlucHV0KTtcblxuICB2YXIgaXNOYW1lVmFsaWQgPSBmYWxzZTtcbiAgdmFyIGlzU3VybmFtZVZhbGlkID0gZmFsc2U7XG4gIHZhciBpc1Bob25lVmFsaWQgPSBmYWxzZTtcbiAgdmFyIGlzRW1haWxWYWxpZCA9IGZhbHNlO1xuICB2YXIgaXNUZXh0VmFsaWQgPSBmYWxzZTtcbiAgdmFyIGlzQWdyZWUgPSBmYWxzZTtcblxuICB2YXIgZGlzYWJsZUJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXN1Ym1pdEJ1dHRvbi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgIHN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZW5hYmxlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChzdWJtaXRCdXR0b24uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICBzdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmVuZGVyRXJyb3IgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy0tZXJyb3InKSkge1xuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2pzLS1lcnJvcicpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmVtb3ZlRXJyb3IgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS1lcnJvcicpKSB7XG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnanMtLWVycm9yJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBjaGVja0Zvcm1WYWxpZGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoXG4gICAgICBpc05hbWVWYWxpZFxuICAgICAgJiYgaXNTdXJuYW1lVmFsaWRcbiAgICAgICYmIGlzUGhvbmVWYWxpZFxuICAgICAgJiYgaXNFbWFpbFZhbGlkXG4gICAgICAmJiBpc1RleHRWYWxpZFxuICAgICAgJiYgaXNBZ3JlZVxuICAgICAgJiYgY2l0eUlucHV0LnZhbHVlICE9PSAnJ1xuICAgICkge1xuICAgICAgZW5hYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpc2FibGVCdXR0b24oKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG9uTmFtZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlzTmFtZVZhbGlkID0gbmFtZUlucHV0LnZhbHVlID09PSAnJyA/IGZhbHNlIDogdHJ1ZTtcblxuICAgIGlzTmFtZVZhbGlkID8gcmVtb3ZlRXJyb3IobmFtZUlucHV0KSA6IHJlbmRlckVycm9yKG5hbWVJbnB1dCk7XG4gICAgaXNOYW1lVmFsaWQgPyByZW1vdmVFcnJvcihuYW1lTGFiZWwpIDogcmVuZGVyRXJyb3IobmFtZUxhYmVsKTtcblxuICAgIGNoZWNrRm9ybVZhbGlkaXR5KCk7XG4gIH07XG5cbiAgdmFyIG9uU3VybmFtZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlzU3VybmFtZVZhbGlkID0gc3VybmFtZUlucHV0LnZhbHVlID09PSAnJyA/IGZhbHNlIDogdHJ1ZTtcblxuICAgIGlzU3VybmFtZVZhbGlkID8gcmVtb3ZlRXJyb3Ioc3VybmFtZUlucHV0KSA6IHJlbmRlckVycm9yKHN1cm5hbWVJbnB1dCk7XG4gICAgaXNTdXJuYW1lVmFsaWQgPyByZW1vdmVFcnJvcihzdXJuYW1lTGFiZWwpIDogcmVuZGVyRXJyb3Ioc3VybmFtZUxhYmVsKTtcblxuICAgIGNoZWNrRm9ybVZhbGlkaXR5KCk7XG4gIH07XG5cbiAgdmFyIG9uUGhvbmVJbnB1dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpc1Bob25lVmFsaWQgPSAoL18vKS50ZXN0KHBob25lSW5wdXQudmFsdWUpID8gZmFsc2UgOiB0cnVlO1xuXG4gICAgaXNQaG9uZVZhbGlkID8gcmVtb3ZlRXJyb3IocGhvbmVJbnB1dCkgOiByZW5kZXJFcnJvcihwaG9uZUlucHV0KTtcbiAgICBpc1Bob25lVmFsaWQgPyByZW1vdmVFcnJvcihwaG9uZUxhYmVsKSA6IHJlbmRlckVycm9yKHBob25lTGFiZWwpO1xuXG5cbiAgICBjaGVja0Zvcm1WYWxpZGl0eSgpO1xuICB9O1xuXG4gIHZhciBvbkVtYWlsSW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaXNFbWFpbFZhbGlkID0gZW1haWxJbnB1dC52YWxpZGl0eS52YWxpZCA/IHRydWUgOiBmYWxzZTtcblxuICAgIGlzRW1haWxWYWxpZCA/IHJlbW92ZUVycm9yKGVtYWlsSW5wdXQpIDogcmVuZGVyRXJyb3IoZW1haWxJbnB1dCk7XG4gICAgaXNFbWFpbFZhbGlkID8gcmVtb3ZlRXJyb3IoZW1haWxMYWJlbCkgOiByZW5kZXJFcnJvcihlbWFpbExhYmVsKTtcblxuXG4gICAgY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgfTtcblxuICB2YXIgb25UZXh0SW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaXNUZXh0VmFsaWQgPSB0ZXh0SW5wdXQudmFsdWUgPT09ICcnID8gZmFsc2UgOiB0cnVlO1xuXG4gICAgaXNUZXh0VmFsaWQgPyByZW1vdmVFcnJvcih0ZXh0SW5wdXQpIDogcmVuZGVyRXJyb3IodGV4dElucHV0KTtcbiAgICBpc1RleHRWYWxpZCA/IHJlbW92ZUVycm9yKHRleHRMYWJlbCkgOiByZW5kZXJFcnJvcih0ZXh0TGFiZWwpO1xuXG4gICAgY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgfTtcblxuICB2YXIgb25BZ3JlZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpc0FncmVlID0gY2hlY2tib3hJbnB1dC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlO1xuXG5cblxuICAgIGlzQWdyZWUgPyByZW1vdmVFcnJvcihjaGVja2JveExhYmVsKSA6IHJlbmRlckVycm9yKGNoZWNrYm94TGFiZWwpO1xuICAgIGlzQWdyZWUgPyByZW1vdmVFcnJvcihhZ3JlZW1lbnQpIDogcmVuZGVyRXJyb3IoYWdyZWVtZW50KTtcblxuXG4gICAgY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgfTtcblxuICB3aW5kb3cuY2hlY2tGb3JtVmFsaWRpdHkgPSBjaGVja0Zvcm1WYWxpZGl0eTtcblxuICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvbk5hbWVJbnB1dCk7XG4gIHN1cm5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uU3VybmFtZUlucHV0KTtcbiAgcGhvbmVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uUGhvbmVJbnB1dCk7XG4gIGVtYWlsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvbkVtYWlsSW5wdXQpO1xuICB0ZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvblRleHRJbnB1dCk7XG4gIGNoZWNrYm94SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25BZ3JlZUNoYW5nZSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCAkLCBjaGVja0Zvcm1WYWxpZGl0eSApIHtcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGVjdGlvbnMgPSAwO1xuICAgIHZhciBpc0Rlc2t0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDE0MDBweCknKS5tYXRjaGVzO1xuICAgIH0gO1xuXG4gICAgdmFyIGlzVGFibGV0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICB3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNzY4cHgpJykubWF0Y2hlc1xuICAgICAgICAmJiB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogMTAyM3B4KScpLm1hdGNoZXM7XG4gICAgfTtcblxuICAgIHZhciBpc01vYmlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAgd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDMyMHB4KScpLm1hdGNoZXNcbiAgICAgICAgJiYgd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDQ3OXB4KScpLm1hdGNoZXM7XG4gICAgfTtcblxuXG4gICAgdmFyIGlzT3V0T2ZEZXNrdG9wID0gIWlzRGVza3RvcCgpO1xuICAgIHZhciBpc091dE9mVGFibGV0ID0gIWlzVGFibGV0KCk7XG4gICAgdmFyIGlzT3V0T2ZNb2JpbGUgPSAhaXNNb2JpbGUoKTtcblxuICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICB9KTtcblxuICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnZhbChudWxsKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblxuICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLm9uKCdzZWxlY3QyOm9wZW4nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgJChcIi5zZWxlY3QyLXJlc3VsdHNcIikubUN1c3RvbVNjcm9sbGJhcih7XG4gICAgICAgIHNldEhlaWdodDogMTUwLFxuICAgICAgICBhdXRvSGlkZVNjcm9sbGJhcjogdHJ1ZSxcbiAgICAgICAgdGhlbWU6ICdtaW5pbWFsLWRhcmsnXG4gICAgICB9KTtcblxuICAgICAgaWYgKHNlbGVjdGlvbnMgPCAxKSB7XG4gICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnZhbCgnNjEwJykudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgIHNlbGVjdGlvbnMrKztcbiAgICAgIH1cblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5zZWxlY3QyLXNlYXJjaF9fZmllbGQnKS5mb2N1cygpO1xuICAgICAgfSwgNDAwKTtcbiAgICB9KTtcblxuICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLm9uKCdzZWxlY3QyOnNlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBjaGVja0Zvcm1WYWxpZGl0eSgpO1xuICAgIH0pO1xuXG4gICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWlzRGVza3RvcCgpICYmICFpc091dE9mRGVza3RvcCkge1xuICAgICAgICBpc091dE9mRGVza3RvcCA9IHRydWU7XG5cbiAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0MignZGVzdHJveScpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRGVza3RvcCgpICYmIGlzT3V0T2ZEZXNrdG9wKSB7XG4gICAgICAgIGlzT3V0T2ZEZXNrdG9wID0gZmFsc2U7XG5cbiAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0MignZGVzdHJveScpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc1RhYmxldCgpICYmICFpc091dE9mVGFibGV0KSB7XG4gICAgICAgIGlzT3V0T2ZUYWJsZXQgPSB0cnVlO1xuXG4gICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoJ2Rlc3Ryb3knKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LPQvtGA0L7QtFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc1RhYmxldCgpICYmIGlzT3V0T2ZUYWJsZXQpIHtcbiAgICAgICAgaXNPdXRPZlRhYmxldCA9IGZhbHNlO1xuICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKCdkZXN0cm95Jyk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0Mih7XG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCz0L7RgNC+0LRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTW9iaWxlKCkgJiYgIWlzT3V0T2ZNb2JpbGUpIHtcbiAgICAgICAgaXNPdXRPZk1vYmlsZSA9IHRydWU7XG5cbiAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0MignZGVzdHJveScpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzTW9iaWxlKCkgJiYgaXNPdXRPZk1vYmlsZSkge1xuICAgICAgICBpc091dE9mTW9iaWxlID0gZmFsc2U7XG5cbiAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0MignZGVzdHJveScpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cbiAgICB9KVxuICB9KTtcbn0pKCBqUXVlcnksIHdpbmRvdy5jaGVja0Zvcm1WYWxpZGl0eSApO1xuIl19
