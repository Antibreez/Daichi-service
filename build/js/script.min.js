!function(){var e=document.querySelector(".equipment__container");new Swiper(".equipment__slider-container",{pagination:{el:".swiper-pagination",type:"bullets"}})&&(e.addEventListener("touchstart",(function(t){let n=0;function i(t){let i=t.changedTouches[0];0!==n&&(e.scrollLeft+=n-i.clientX),n=i.clientX}document.addEventListener("touchmove",i),document.addEventListener("touchend",(function e(t){document.removeEventListener("touchmove",i),document.removeEventListener("touchend",e)}))})),e.addEventListener("mousedown",(function(t){let n=0;function i(t){t.preventDefault(),0!==n&&(e.scrollLeft+=n-t.clientX),n=t.clientX}document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(t){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}))})))}(),function(){var e=document.querySelector(".service-form form"),t=document.querySelector(".service-form__input--name"),n=document.querySelector(".service-form__label--name"),i=document.querySelector(".service-form__input--surname"),c=document.querySelector(".service-form__label--surname"),o=document.querySelector(".service-form__input--phone"),s=document.querySelector(".service-form__label--phone"),r=document.querySelector(".service-form__input--email"),l=document.querySelector(".service-form__label--email"),a=document.querySelector(".service-form__input--city"),u=(document.querySelector(".service-form__label--city"),document.querySelector(".service-form__text")),m=document.querySelector(".service-form__label--text"),d=document.querySelector("input[type='checkbox']"),p=document.querySelector("label[for='agreement']"),f=document.querySelector(".service-form__text-wrapper"),v=document.querySelector(".service-form__submit");if(e){new Inputmask("+7(999)999-99-99").mask(o);var h=!1,b=!1,_=!1,y=!1,g=!1,x=!1,w=function(e){e.classList.contains("js--error")||e.classList.add("js--error")},j=function(e){e.classList.contains("js--error")&&e.classList.remove("js--error")},L=function(){h&&b&&_&&y&&g&&x&&""!==a.value?v.hasAttribute("disabled")&&v.removeAttribute("disabled"):v.hasAttribute("disabled")||v.setAttribute("disabled","")};window.checkFormValidity=L,t.addEventListener("input",(function(){(h=""!==t.value)?j(t):w(t),h?j(n):w(n),L()})),i.addEventListener("input",(function(){(b=""!==i.value)?j(i):w(i),b?j(c):w(c),L()})),o.addEventListener("input",(function(){(_=!/_/.test(o.value))?j(o):w(o),_?j(s):w(s),L()})),r.addEventListener("input",(function(){(y=!!r.validity.valid)?j(r):w(r),y?j(l):w(l),L()})),u.addEventListener("input",(function(){(g=""!==u.value)?j(u):w(u),g?j(m):w(m),L()})),d.addEventListener("change",(function(){(x=!!d.checked)?j(p):w(p),x?j(f):w(f),L()}))}}(),function(e,t){e(document).ready((function(){var n=0,i=function(){return window.matchMedia("(min-width: 1400px)").matches},c=function(){return window.matchMedia("(min-width: 768px)").matches&&window.matchMedia("(max-width: 1023px)").matches},o=function(){return window.matchMedia("(min-width: 320px)").matches&&window.matchMedia("(max-width: 479px)").matches},s=!i(),r=!c(),l=!o();e(".js-example-basic-single").select2({placeholder:"Выберите город"}),e(".js-example-basic-single").val(null).trigger("change"),e(".js-example-basic-single").on("select2:open",(function(t){e(".select2-results").mCustomScrollbar({setHeight:150,autoHideScrollbar:!0,theme:"minimal-dark"}),n<1&&(e(".js-example-basic-single").val("610").trigger("change"),n++),setTimeout((function(){e(".select2-search__field").focus()}),400)})),e(".js-example-basic-single").on("select2:select",(function(e){t()})),e(window).on("resize",(function(){i()||s||(s=!0,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),i()&&s&&(s=!1,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),c()||r||(r=!0,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),c()&&r&&(r=!1,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),o()||l||(l=!0,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300)),o()&&l&&(l=!1,e(".js-example-basic-single").select2("destroy"),setTimeout((function(){e(".js-example-basic-single").select2({placeholder:"Выберите город"})}),300))}))}))}(jQuery,window.checkFormValidity);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVxdWlwbWVudC5qcyIsImZvcm0uanMiLCJzZWxlY3QtaW5wdXQuanMiXSwibmFtZXMiOlsiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiU3dpcGVyIiwicGFnaW5hdGlvbiIsImVsIiwidHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwieCIsIm9uVG91Y2hNb3ZlIiwidG91Y2hvYmoiLCJjaGFuZ2VkVG91Y2hlcyIsInNjcm9sbExlZnQiLCJjbGllbnRYIiwib25Ub3VjaEVuZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvbk1vdXNlTW92ZSIsInByZXZlbnREZWZhdWx0Iiwib25Nb3VzZVVwIiwiZm9ybSIsIm5hbWVJbnB1dCIsIm5hbWVMYWJlbCIsInN1cm5hbWVJbnB1dCIsInN1cm5hbWVMYWJlbCIsInBob25lSW5wdXQiLCJwaG9uZUxhYmVsIiwiZW1haWxJbnB1dCIsImVtYWlsTGFiZWwiLCJjaXR5SW5wdXQiLCJ0ZXh0SW5wdXQiLCJ0ZXh0TGFiZWwiLCJjaGVja2JveElucHV0IiwiY2hlY2tib3hMYWJlbCIsImFncmVlbWVudCIsInN1Ym1pdEJ1dHRvbiIsIklucHV0bWFzayIsIm1hc2siLCJpc05hbWVWYWxpZCIsImlzU3VybmFtZVZhbGlkIiwiaXNQaG9uZVZhbGlkIiwiaXNFbWFpbFZhbGlkIiwiaXNUZXh0VmFsaWQiLCJpc0FncmVlIiwicmVuZGVyRXJyb3IiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZCIsInJlbW92ZUVycm9yIiwicmVtb3ZlIiwiY2hlY2tGb3JtVmFsaWRpdHkiLCJ2YWx1ZSIsImhhc0F0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsIndpbmRvdyIsInRlc3QiLCJ2YWxpZGl0eSIsInZhbGlkIiwiY2hlY2tlZCIsIiQiLCJyZWFkeSIsInNlbGVjdGlvbnMiLCJpc0Rlc2t0b3AiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImlzVGFibGV0IiwiaXNNb2JpbGUiLCJpc091dE9mRGVza3RvcCIsImlzT3V0T2ZUYWJsZXQiLCJpc091dE9mTW9iaWxlIiwic2VsZWN0MiIsInBsYWNlaG9sZGVyIiwidmFsIiwidHJpZ2dlciIsIm9uIiwibUN1c3RvbVNjcm9sbGJhciIsInNldEhlaWdodCIsImF1dG9IaWRlU2Nyb2xsYmFyIiwidGhlbWUiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsSUFBQUEsRUFBQUMsU0FBQUMsY0FBQSx5QkFTQSxJQUFBQyxPQVBBLCtCQU9BLENBQ0FDLFdBQUEsQ0FDQUMsR0FBQSxxQkFDQUMsS0FBQSxlQWlEQU4sRUFBQU8saUJBQUEsY0E1Q0EsU0FBQUMsR0FDQSxJQUFBQyxFQUFBLEVBRUEsU0FBQUMsRUFBQUYsR0FDQSxJQUFBRyxFQUFBSCxFQUFBSSxlQUFBLEdBRUEsSUFBQUgsSUFDQVQsRUFBQWEsWUFBQUosRUFBQUUsRUFBQUcsU0FHQUwsRUFBQUUsRUFBQUcsUUFRQWIsU0FBQU0saUJBQUEsWUFBQUcsR0FDQVQsU0FBQU0saUJBQUEsWUFOQSxTQUFBUSxFQUFBUCxHQUNBUCxTQUFBZSxvQkFBQSxZQUFBTixHQUNBVCxTQUFBZSxvQkFBQSxXQUFBRCxTQThCQWYsRUFBQU8saUJBQUEsYUF2QkEsU0FBQUMsR0FDQSxJQUFBQyxFQUFBLEVBRUEsU0FBQVEsRUFBQVQsR0FDQUEsRUFBQVUsaUJBRUEsSUFBQVQsSUFDQVQsRUFBQWEsWUFBQUosRUFBQUQsRUFBQU0sU0FHQUwsRUFBQUQsRUFBQU0sUUFRQWIsU0FBQU0saUJBQUEsWUFBQVUsR0FDQWhCLFNBQUFNLGlCQUFBLFdBTkEsU0FBQVksRUFBQVgsR0FDQVAsU0FBQWUsb0JBQUEsWUFBQUMsR0FDQWhCLFNBQUFlLG9CQUFBLFVBQUFHLFVBdkRBLEdDQUEsV0FDQSxJQUFBQyxFQUFBbkIsU0FBQUMsY0FBQSxzQkFDQW1CLEVBQUFwQixTQUFBQyxjQUFBLDhCQUNBb0IsRUFBQXJCLFNBQUFDLGNBQUEsOEJBQ0FxQixF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LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcXVpcG1lbnRfX2NvbnRhaW5lcicpO1xuXG4gIHZhciBzbGlkZXIgPSBpbml0UHJldmlld1N3aXBlcignLmVxdWlwbWVudF9fc2xpZGVyLWNvbnRhaW5lcicpO1xuXG4gIGlmICghc2xpZGVyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdFByZXZpZXdTd2lwZXIobmFtZSkge1xuICAgIHJldHVybiBuZXcgU3dpcGVyKG5hbWUsIHtcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgICB0eXBlOiAnYnVsbGV0cycsXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZSkge1xuICAgIGxldCB4ID0gMDtcblxuICAgIGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKGUpIHtcbiAgICAgIGxldCB0b3VjaG9iaiA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XG5cbiAgICAgIGlmICh4ICE9PSAwKSB7XG4gICAgICAgIGNvbnRhaW5lci5zY3JvbGxMZWZ0ICs9IHggLSB0b3VjaG9iai5jbGllbnRYO1xuICAgICAgfVxuXG4gICAgICB4ID0gdG91Y2hvYmouY2xpZW50WDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblRvdWNoRW5kKGUpIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoYHRvdWNobW92ZWAsIG9uVG91Y2hNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoYHRvdWNoZW5kYCwgb25Ub3VjaEVuZClcbiAgICB9XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGB0b3VjaG1vdmVgLCBvblRvdWNoTW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihgdG91Y2hlbmRgLCBvblRvdWNoRW5kKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICBsZXQgeCA9IDA7XG5cbiAgICBmdW5jdGlvbiBvbk1vdXNlTW92ZShlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGlmICh4ICE9PSAwKSB7XG4gICAgICAgIGNvbnRhaW5lci5zY3JvbGxMZWZ0ICs9IHggLSBlLmNsaWVudFg7XG4gICAgICB9XG5cbiAgICAgIHggPSBlLmNsaWVudFg7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Nb3VzZVVwKGUpIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoYG1vdXNlbW92ZWAsIG9uTW91c2VNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoYG1vdXNldXBgLCBvbk1vdXNlVXApO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoYG1vdXNlbW92ZWAsIG9uTW91c2VNb3ZlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGBtb3VzZXVwYCwgb25Nb3VzZVVwKTtcbiAgfVxuXG4gIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0KTtcbiAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uTW91c2VEb3duKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm0gZm9ybScpO1xuICB2YXIgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9faW5wdXQtLW5hbWUnKTtcbiAgdmFyIG5hbWVMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX2xhYmVsLS1uYW1lJyk7XG4gIHZhciBzdXJuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19pbnB1dC0tc3VybmFtZScpO1xuICB2YXIgc3VybmFtZUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fbGFiZWwtLXN1cm5hbWUnKTtcbiAgdmFyIHBob25lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19pbnB1dC0tcGhvbmUnKTtcbiAgdmFyIHBob25lTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19sYWJlbC0tcGhvbmUnKTtcbiAgdmFyIGVtYWlsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19pbnB1dC0tZW1haWwnKTtcbiAgdmFyIGVtYWlsTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19sYWJlbC0tZW1haWwnKTtcbiAgdmFyIGNpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX2lucHV0LS1jaXR5Jyk7XG4gIHZhciBjaXR5TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1mb3JtX19sYWJlbC0tY2l0eScpO1xuICB2YXIgdGV4dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fdGV4dCcpO1xuICB2YXIgdGV4dExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fbGFiZWwtLXRleHQnKTtcbiAgdmFyIGNoZWNrYm94SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0nY2hlY2tib3gnXVwiKTtcbiAgdmFyIGNoZWNrYm94TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxbZm9yPSdhZ3JlZW1lbnQnXVwiKTtcbiAgdmFyIGFncmVlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlLWZvcm1fX3RleHQtd3JhcHBlcicpO1xuICB2YXIgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtZm9ybV9fc3VibWl0Jyk7XG5cbiAgaWYgKCFmb3JtKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGltUGhvbmUgPSBuZXcgSW5wdXRtYXNrKCcrNyg5OTkpOTk5LTk5LTk5Jyk7XG4gIGltUGhvbmUubWFzayhwaG9uZUlucHV0KTtcblxuICB2YXIgaXNOYW1lVmFsaWQgPSBmYWxzZTtcbiAgdmFyIGlzU3VybmFtZVZhbGlkID0gZmFsc2U7XG4gIHZhciBpc1Bob25lVmFsaWQgPSBmYWxzZTtcbiAgdmFyIGlzRW1haWxWYWxpZCA9IGZhbHNlO1xuICB2YXIgaXNUZXh0VmFsaWQgPSBmYWxzZTtcbiAgdmFyIGlzQWdyZWUgPSBmYWxzZTtcblxuICB2YXIgZGlzYWJsZUJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXN1Ym1pdEJ1dHRvbi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgIHN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZW5hYmxlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChzdWJtaXRCdXR0b24uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICBzdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmVuZGVyRXJyb3IgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy0tZXJyb3InKSkge1xuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2pzLS1lcnJvcicpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmVtb3ZlRXJyb3IgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS1lcnJvcicpKSB7XG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnanMtLWVycm9yJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBjaGVja0Zvcm1WYWxpZGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoXG4gICAgICBpc05hbWVWYWxpZFxuICAgICAgJiYgaXNTdXJuYW1lVmFsaWRcbiAgICAgICYmIGlzUGhvbmVWYWxpZFxuICAgICAgJiYgaXNFbWFpbFZhbGlkXG4gICAgICAmJiBpc1RleHRWYWxpZFxuICAgICAgJiYgaXNBZ3JlZVxuICAgICAgJiYgY2l0eUlucHV0LnZhbHVlICE9PSAnJ1xuICAgICkge1xuICAgICAgZW5hYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpc2FibGVCdXR0b24oKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG9uTmFtZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlzTmFtZVZhbGlkID0gbmFtZUlucHV0LnZhbHVlID09PSAnJyA/IGZhbHNlIDogdHJ1ZTtcblxuICAgIGlzTmFtZVZhbGlkID8gcmVtb3ZlRXJyb3IobmFtZUlucHV0KSA6IHJlbmRlckVycm9yKG5hbWVJbnB1dCk7XG4gICAgaXNOYW1lVmFsaWQgPyByZW1vdmVFcnJvcihuYW1lTGFiZWwpIDogcmVuZGVyRXJyb3IobmFtZUxhYmVsKTtcblxuICAgIGNoZWNrRm9ybVZhbGlkaXR5KCk7XG4gIH07XG5cbiAgdmFyIG9uU3VybmFtZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlzU3VybmFtZVZhbGlkID0gc3VybmFtZUlucHV0LnZhbHVlID09PSAnJyA/IGZhbHNlIDogdHJ1ZTtcblxuICAgIGlzU3VybmFtZVZhbGlkID8gcmVtb3ZlRXJyb3Ioc3VybmFtZUlucHV0KSA6IHJlbmRlckVycm9yKHN1cm5hbWVJbnB1dCk7XG4gICAgaXNTdXJuYW1lVmFsaWQgPyByZW1vdmVFcnJvcihzdXJuYW1lTGFiZWwpIDogcmVuZGVyRXJyb3Ioc3VybmFtZUxhYmVsKTtcblxuICAgIGNoZWNrRm9ybVZhbGlkaXR5KCk7XG4gIH07XG5cbiAgdmFyIG9uUGhvbmVJbnB1dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpc1Bob25lVmFsaWQgPSAoL18vKS50ZXN0KHBob25lSW5wdXQudmFsdWUpID8gZmFsc2UgOiB0cnVlO1xuXG4gICAgaXNQaG9uZVZhbGlkID8gcmVtb3ZlRXJyb3IocGhvbmVJbnB1dCkgOiByZW5kZXJFcnJvcihwaG9uZUlucHV0KTtcbiAgICBpc1Bob25lVmFsaWQgPyByZW1vdmVFcnJvcihwaG9uZUxhYmVsKSA6IHJlbmRlckVycm9yKHBob25lTGFiZWwpO1xuXG5cbiAgICBjaGVja0Zvcm1WYWxpZGl0eSgpO1xuICB9O1xuXG4gIHZhciBvbkVtYWlsSW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaXNFbWFpbFZhbGlkID0gZW1haWxJbnB1dC52YWxpZGl0eS52YWxpZCA/IHRydWUgOiBmYWxzZTtcblxuICAgIGlzRW1haWxWYWxpZCA/IHJlbW92ZUVycm9yKGVtYWlsSW5wdXQpIDogcmVuZGVyRXJyb3IoZW1haWxJbnB1dCk7XG4gICAgaXNFbWFpbFZhbGlkID8gcmVtb3ZlRXJyb3IoZW1haWxMYWJlbCkgOiByZW5kZXJFcnJvcihlbWFpbExhYmVsKTtcblxuXG4gICAgY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgfTtcblxuICB2YXIgb25UZXh0SW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaXNUZXh0VmFsaWQgPSB0ZXh0SW5wdXQudmFsdWUgPT09ICcnID8gZmFsc2UgOiB0cnVlO1xuXG4gICAgaXNUZXh0VmFsaWQgPyByZW1vdmVFcnJvcih0ZXh0SW5wdXQpIDogcmVuZGVyRXJyb3IodGV4dElucHV0KTtcbiAgICBpc1RleHRWYWxpZCA/IHJlbW92ZUVycm9yKHRleHRMYWJlbCkgOiByZW5kZXJFcnJvcih0ZXh0TGFiZWwpO1xuXG4gICAgY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgfTtcblxuICB2YXIgb25BZ3JlZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpc0FncmVlID0gY2hlY2tib3hJbnB1dC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlO1xuXG5cblxuICAgIGlzQWdyZWUgPyByZW1vdmVFcnJvcihjaGVja2JveExhYmVsKSA6IHJlbmRlckVycm9yKGNoZWNrYm94TGFiZWwpO1xuICAgIGlzQWdyZWUgPyByZW1vdmVFcnJvcihhZ3JlZW1lbnQpIDogcmVuZGVyRXJyb3IoYWdyZWVtZW50KTtcblxuXG4gICAgY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgfTtcblxuICB3aW5kb3cuY2hlY2tGb3JtVmFsaWRpdHkgPSBjaGVja0Zvcm1WYWxpZGl0eTtcblxuICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvbk5hbWVJbnB1dCk7XG4gIHN1cm5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uU3VybmFtZUlucHV0KTtcbiAgcGhvbmVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uUGhvbmVJbnB1dCk7XG4gIGVtYWlsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvbkVtYWlsSW5wdXQpO1xuICB0ZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvblRleHRJbnB1dCk7XG4gIGNoZWNrYm94SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25BZ3JlZUNoYW5nZSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCAkLCBjaGVja0Zvcm1WYWxpZGl0eSApIHtcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGVjdGlvbnMgPSAwO1xuICAgIHZhciBpc0Rlc2t0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDE0MDBweCknKS5tYXRjaGVzO1xuICAgIH0gO1xuXG4gICAgdmFyIGlzVGFibGV0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICB3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogNzY4cHgpJykubWF0Y2hlc1xuICAgICAgICAmJiB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogMTAyM3B4KScpLm1hdGNoZXM7XG4gICAgfTtcblxuICAgIHZhciBpc01vYmlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAgd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDMyMHB4KScpLm1hdGNoZXNcbiAgICAgICAgJiYgd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDQ3OXB4KScpLm1hdGNoZXM7XG4gICAgfTtcblxuXG4gICAgdmFyIGlzT3V0T2ZEZXNrdG9wID0gIWlzRGVza3RvcCgpO1xuICAgIHZhciBpc091dE9mVGFibGV0ID0gIWlzVGFibGV0KCk7XG4gICAgdmFyIGlzT3V0T2ZNb2JpbGUgPSAhaXNNb2JpbGUoKTtcblxuICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICB9KTtcblxuICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnZhbChudWxsKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblxuICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLm9uKCdzZWxlY3QyOm9wZW4nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgJChcIi5zZWxlY3QyLXJlc3VsdHNcIikubUN1c3RvbVNjcm9sbGJhcih7XG4gICAgICAgIHNldEhlaWdodDogMTUwLFxuICAgICAgICBhdXRvSGlkZVNjcm9sbGJhcjogdHJ1ZSxcbiAgICAgICAgdGhlbWU6ICdtaW5pbWFsLWRhcmsnXG4gICAgICB9KTtcblxuICAgICAgaWYgKHNlbGVjdGlvbnMgPCAxKSB7XG4gICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnZhbCgnNjEwJykudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgIHNlbGVjdGlvbnMrKztcbiAgICAgIH1cblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5zZWxlY3QyLXNlYXJjaF9fZmllbGQnKS5mb2N1cygpO1xuICAgICAgfSwgNDAwKTtcbiAgICB9KTtcblxuICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLm9uKCdzZWxlY3QyOnNlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBjaGVja0Zvcm1WYWxpZGl0eSgpO1xuICAgIH0pO1xuXG4gICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWlzRGVza3RvcCgpICYmICFpc091dE9mRGVza3RvcCkge1xuICAgICAgICBpc091dE9mRGVza3RvcCA9IHRydWU7XG5cbiAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0MignZGVzdHJveScpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRGVza3RvcCgpICYmIGlzT3V0T2ZEZXNrdG9wKSB7XG4gICAgICAgIGlzT3V0T2ZEZXNrdG9wID0gZmFsc2U7XG5cbiAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0MignZGVzdHJveScpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc1RhYmxldCgpICYmICFpc091dE9mVGFibGV0KSB7XG4gICAgICAgIGlzT3V0T2ZUYWJsZXQgPSB0cnVlO1xuXG4gICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoJ2Rlc3Ryb3knKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKHtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcItCS0YvQsdC10YDQuNGC0LUg0LPQvtGA0L7QtFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc1RhYmxldCgpICYmIGlzT3V0T2ZUYWJsZXQpIHtcbiAgICAgICAgaXNPdXRPZlRhYmxldCA9IGZhbHNlO1xuICAgICAgICAkKCcuanMtZXhhbXBsZS1iYXNpYy1zaW5nbGUnKS5zZWxlY3QyKCdkZXN0cm95Jyk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0Mih7XG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogXCLQktGL0LHQtdGA0LjRgtC1INCz0L7RgNC+0LRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTW9iaWxlKCkgJiYgIWlzT3V0T2ZNb2JpbGUpIHtcbiAgICAgICAgaXNPdXRPZk1vYmlsZSA9IHRydWU7XG5cbiAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0MignZGVzdHJveScpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzTW9iaWxlKCkgJiYgaXNPdXRPZk1vYmlsZSkge1xuICAgICAgICBpc091dE9mTW9iaWxlID0gZmFsc2U7XG5cbiAgICAgICAgJCgnLmpzLWV4YW1wbGUtYmFzaWMtc2luZ2xlJykuc2VsZWN0MignZGVzdHJveScpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoJy5qcy1leGFtcGxlLWJhc2ljLXNpbmdsZScpLnNlbGVjdDIoe1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi0JLRi9Cx0LXRgNC40YLQtSDQs9C+0YDQvtC0XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cbiAgICB9KVxuICB9KTtcbn0pKCBqUXVlcnksIHdpbmRvdy5jaGVja0Zvcm1WYWxpZGl0eSApO1xuIl19
